blueprint:
  name: üì∏–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram —Å–∫—Ä–∏–Ω–æ–≤ —Å–æ–±—ã—Ç–∏–π Frigate –∏ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ —Å–æ–æ–±—â–µ–Ω–∏—è
  domain: automation
  description: |
    #### –í —Å–æ–æ–±—â–µ–Ω–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∫–Ω–æ–ø–∫–∏:
    - üì≤ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Ç—Ä–∏–º –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
    - ‚ùå –£–¥–∞–ª–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ Frigate –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram.
    - üìº –ó–∞–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ –Ω–∞ –≤–∏–¥–µ–æ.
    - üîö –ó–∞–º–µ–Ω–∏—Ç—å –≤–∏–¥–µ–æ –Ω–∞ —Ñ–æ—Ç–æ.
  input:
    in_camera:
      name: –ö–∞–º–µ—Ä–∞
      description: –ö–∞–º–µ—Ä–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –∏–º—è –∫–æ—Ç–æ—Ä–æ–π –±–µ—Ä–µ—Ç—Å—è –¥–ª—è —Å–≤–µ—Ä–∫–∏ —Å –∏–º–µ–Ω–µ–º –∫–∞–º–µ—Ä—ã –≤ —Å–æ–±—ã—Ç–∏–∏ mqtt.
      selector:
        entity:
          domain: camera
          integration: frigate
    in_notify:
      name: –°–ª—É–∂–±–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è telegram –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
      description: –°–ª—É–∂–±–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è **telegram** –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏.
      default: telegram_send
      selector:
        template:
    in_notify_mobile:
      name: –°–ª—É–∂–±–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
      description: –°–ª—É–∂–±–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è **–º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**, –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ç—Ä–∏–º–∞ –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏ –ø–æ –∫–Ω–æ–ø–∫–µ üì≤.
      default: notify
      selector:
        template:
    in_text_message:
      name: –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
      description: –î–æ—Å—Ç—É–ø–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ camera, camera_friendly_name, start_time, end_time, diff_time, offset_zones, object, url_thumb –∏ —à–∞–±–ª–æ–Ω—ã.
      default: "üì∏*–î–≤–∏–∂–µ–Ω–∏–µ* {{camera_friendly_name}} {{diff_time}}s\n‚è±{{start_time}} –ø–æ {{end_time}}\nüéØ{{offset_zones}}"
      selector:
        template:
    in_type_photo:
      name: –¢–∏–ø –∫–∞—Ä—Ç–∏–Ω–∫–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
      description: –¢–∏–ø –∫–∞—Ä—Ç–∏–Ω–∫–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
      default: thumbnail
      selector:
        select:
          options:
            - label: –ú–∏–Ω–∏–∞—Ç—é—Ä–∞ –æ–±—ä–µ–∫—Ç–∞ (thumbnail)
              value: thumbnail
            - label: –ü–æ–ª–Ω—ã–π —Å–∫—Ä–∏–Ω—à–æ—Ç –∫–∞–¥—Ä–∞ (snapshot)
              value: snapshot
    in_url_frigate:
      name: –ê–¥—Ä–µ—Å Frigate
      description: |
        –ê–¥—Ä–µ—Å Frigate, –Ω–∞—á–∏–Ω–∞—è —Å **http://...**
        –ü—Ä–∏–º–µ—Ä—ã:
        - Frigate http://ccab4aaf-frigate:5000
        - Home Assistant http://localhost:8123
      default: http://ccab4aaf-frigate:5000
      selector:
        text:
    in_type_api:
      name: –ó–∞–ø—Ä–æ—Å –∫ Frigate —á–µ—Ä–µ–∑ –∫–∞–∫–æ–π API
      description: –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞ Frigate –∏–ª–∏ Home Assistant
      default: api/events
      selector:
        select:
          options:
            - label: Frigate API
              value: api/events
            - label: Home Assistant API
              value: api/frigate/notifications
    in_time_wait:
      name: –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ñ–æ—Ç–æ
      description: –í—Ä–µ–º—è –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤–∏–¥–µ–æ –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —Ñ–æ—Ç–æ.
      default: 00:01:00
      selector:
        time:
    in_zones:
      name: (–î–æ–ø) –ó–æ–Ω—ã
      description: –°–ø–∏—Å–æ–∫ –∑–æ–Ω —á–µ—Ä–µ–∑ "-" —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏, –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –≤ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. 
      default: []
      selector:
        object:
    in_object_event:
      name: (–î–æ–ø) –û–±—ä–µ–∫—Ç—ã —Å–æ–±—ã—Ç–∏–π
      description: –°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ "-" —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏, –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. 
      default: []
      selector:
        object:
    in_condition:
      name: (–î–æ–ø) –£—Å–ª–æ–≤–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
      description: |
        **–¢–∏–ø –¥–µ–π—Ç—Å–≤–∏—è –≤—ã–±—Ä–∞—Ç—å —É—Å–ª–æ–≤–∏–µ!**
        –£—Å–ª–æ–≤–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram.
        –î–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Ç—Å–≤–∏–π –Ω–∏–∂–µ —ç—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.
      default: []
      selector:
        action:
    in_action:
      name: (–î–æ–ø) –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
      description: |
        –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤–∫–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è. 
        **–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –Ω–æ–≤—ã—Ö (new) —Å–æ–±—ã—Ç–∏—è—Ö Frigate.**
        –î–æ—Å—Ç—É–ø–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: camera, camera_friendly_name, start_time, end_time, offset_zones, object, url_thumb, mes_caption, video_id
      default: []
      selector:
        action:

trace:
  stored_traces: 7

mode: parallel

max: 1000

variables:
  in_url_frigate: !input in_url_frigate
  in_notify: !input in_notify
  in_type_api: !input in_type_api
  in_type_photo: !input in_type_photo
  event_notify: "{{in_notify.replace('notify.', '')}}"
  in_notify_mobile: !input in_notify_mobile
  notify_mobile: "{{in_notify_mobile.replace('notify.', '')}}"
  in_camera: !input in_camera
  camera_friendly_name: "{{state_attr(in_camera, 'friendly_name').replace('-', ' ')}}"
  in_zones: !input in_zones
  in_object_event: !input in_object_event
  frigate_api: "{{in_url_frigate}}/{{in_type_api}}"

trigger_variables:
  in_camera: !input in_camera
  camera: "{{in_camera|replace('camera.', '')}}"

trigger:
  - platform: mqtt
    topic: frigate/events
    payload: "{{camera}}/new"
    value_template: "{{value_json['after']['camera']|lower|replace('-','_')}}/{{ value_json['type']}}"
    id: frigate-event
  - platform: event
    event_type: telegram_callback
    event_data:
      command: "/frigate_{{camera}}"
    id: telegram-command

condition: []

action:
  - choose:
      - alias: "–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –∏–∑ frigate"
        conditions:
          - condition: trigger
            id: frigate-event
        sequence:
          - variables:
              video_id: "{{trigger.payload_json['after']['id']}}"
              camera: "{{trigger.payload_json['after']['camera']}}"
              label: "{{trigger.payload_json['after']['label']|lower}}"
              entered_zones: "{{trigger.payload_json['after']['entered_zones']}}"
              current_zones: "{{trigger.payload_json['after']['current_zones']}}"
              offset_zones: "{{entered_zones|list|join(', ')}} => {{current_zones|list|join(', ')}}"
              start_time: "{{trigger.payload_json['after']['start_time']|timestamp_custom('%Y-%m-%d %H:%M:%S', default='00:00:00')}}"
              end_time: "{{trigger.payload_json['after']['end_time']|timestamp_custom('%H:%M:%S', default='00:00:00')}}"
              diff_time: 0
              msg_tag: "mot-cam-{{video_id}}"
              in_text_message: !input in_text_message
              mes_caption: "üì∏{{in_text_message}}"
              url_thumb: "{{frigate_api}}/{{video_id}}/{{in_type_photo}}.jpg"
              inline_keyboard_error: "‚ùå–°–æ–±—ã—Ç–∏–µ –Ω–µ –∑–∞–∫—Ä—ã—Ç–æ:/frigate_{{camera}} {{video_id}} delete"
              inline_keyboard_new: "‚ùå:/frigate_{{camera}} {{video_id}} delete, üì≤:/frigate_{{camera}} {{video_id}} live"
              inline_keyboard_end: "üì≤:/frigate_{{camera}} {{video_id}} live, ‚ùå:/frigate_{{camera}} {{video_id}} delete, üìº:/frigate_{{camera}} {{video_id}} clip"
          - parallel:
              - sequence: !input in_action
              - if:
                  - not:
                      - and:
                          - "{{not in_object_event|length or in_object_event|select('in', label)|list|length > 0}}"
                          - "{{not in_zones|length or in_zones|select('in', entered_zones)|list|length > 0}}"
                then:
                  - stop: –û–±—ä–µ–∫—Ç –∏–ª–∏ –∑–æ–Ω–∞ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç
                else:
                  - condition: !input in_condition
                  - parallel:
                      - service: notify.{{event_notify}}
                        data:
                          message: "{{mes_caption}}"
                          data:
                            photo:
                            - url: "{{url_thumb}}"
                              caption: "{{mes_caption[:1024]}}"
                            inline_keyboard: "{{inline_keyboard_new}}"
                            message_tag: "{{msg_tag}}"
                      - sequence:
                          - wait_for_trigger:
                              - platform: event
                                event_type: telegram_sent
                                event_data:
                                  message_tag: "{{msg_tag}}"
                            timeout: "00:00:30"
                          - if:
                              - condition: template
                                value_template: "{{not wait.trigger}}"
                            then:
                              - stop: –Ω–µ–±—ã–ª–æ —Å–æ–±—ã—Ç–∏—è telegram_sent –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
                          - variables:
                              message_id: "{{wait.trigger.event.data.message_id}}"
                              chat_id: "{{wait.trigger.event.data.chat_id }}"
                          - wait_for_trigger:
                              - platform: mqtt
                                topic: frigate/events
                                payload: "{{video_id}}/end"
                                value_template: "{{value_json['after']['id']}}/{{ value_json['type']}}"
                            timeout: "00:45:00"
                          - if:
                              - condition: template
                                value_template: "{{not wait.trigger}}"
                            then:
                              - service: telegram_bot.edit_caption
                                data:
                                  message_id: "{{message_id}}"
                                  chat_id: "{{chat_id}}"
                                  caption: "{{mes_caption}}"
                                  inline_keyboard: "{{inline_keyboard_error}}"
                              - stop: –∏—Å—Ç–µ–∫–ª–æ –≤—Ä–µ–º—è –¥–ª—è —Å–æ–±—ã—Ç–∏—è
                          - variables:
                                    start_time: "{{wait.trigger.payload_json['after']['start_time']|timestamp_custom('%Y-%m-%d %H:%M:%S', default='00:00:00')}}"
                                    end_time: "{{wait.trigger.payload_json['after']['end_time']|timestamp_custom('%H:%M:%S', default='00:00:00')}}"
                                    diff_time: "{{(wait.trigger.payload_json['after']['end_time'] - wait.trigger.payload_json['after']['start_time'])|relative_time|int(0)}}"
                                    entered_zones: "{{trigger.payload_json['after']['entered_zones']}}"
                                    current_zones: "{{wait.trigger.payload_json['after']['current_zones']}}"
                                    offset_zones: "{{entered_zones|list|join(', ')}} => {{current_zones|list|join(', ')}}"
                                    in_text_message: !input in_text_message
                                    mes_caption: "üì∏{{in_text_message}}"
                          - service: telegram_bot.edit_caption
                            data:
                                    message_id: "{{message_id}}"
                                    chat_id: "{{chat_id}}"
                                    caption: "{{mes_caption[:1024]}}"
                                    inline_keyboard: "{{inline_keyboard_end}}"

      - alias: "–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏ –≤ –¢–ì"
        conditions:
          - condition: trigger
            id: telegram-command
        sequence:
          - variables:
              video_id: "{{trigger.event.data.args[0]}}"
              command_tg: "{{trigger.event.data.args[1]}}"
              camera: "{{trigger.event.data.command.split('_')[1]}}"
              chat_id: "{{trigger.event.data.chat_id}}"
              user_id: "{{trigger.event.data.user_id}}"
              message_id: "{{trigger.event.data.message.message_id}}"
              button_id: "{{trigger.event.data.id}}"
              button_id_pic: "{{((command_tg == 'thumb')|iif(button_id, False))}}"
              mes_caption: "{{trigger.event.data.message.caption}}"
              inline_keyboard_reload: "‚è≥–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ‚è≥:/frigate_{{camera}} {{video_id}} reload"
              inline_keyboard_clip: "üîö:/frigate_{{camera}} {{video_id}} thumb"
              inline_keyboard_jpg: "üì≤:/frigate_{{camera}} {{video_id}} live, ‚ùå:/frigate_{{camera}} {{video_id}} delete, üìº:/frigate_{{camera}} {{video_id}} clip"
          - service: logbook.log
            data:
                name: "{{this.attributes.friendly_name}}"
                message: "–°–æ–±—ã—Ç–∏–µ {{command_tg}} –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {{user_id}} {{trigger.event.data.from_first|default('–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç')}} {{video_id}} {{mes_caption}}."
                entity_id: "{{this.entity_id}}"
          - choose:
              - conditions:
                  - condition: template
                    value_template: "{{command_tg=='delete'}}"
                sequence:
                  - service: rest_command.delete_event_frigate
                    data:
                      event_id: "{{video_id}}"
                  - service: telegram_bot.delete_message
                    continue_on_error: true
                    data:
                      message_id: "{{message_id}}"
                      chat_id: "{{chat_id}}"
                  - service: telegram_bot.answer_callback_query
                    continue_on_error: true
                    data:
                      show_alert: false
                      message: –£–¥–∞–ª–µ–Ω–æ {{mes_caption}}
                      callback_query_id: "{{button_id}}"

              - conditions:
                  - condition: template
                    value_template: "{{command_tg=='live'}}"
                sequence:
                  - service: "notify.{{notify_mobile}}"
                    data:
                      message: clear_notification
                      data:
                        tag: camera-strim
                  - service: "notify.{{notify_mobile}}"
                    data:
                      message: –°—Ç—Ä–∏–º {{camera}}
                      data:
                        entity_id: camera.{{camera}}
                        tag: camera-strim
                  - service: telegram_bot.answer_callback_query
                    data:
                      show_alert: false
                      message: –û—Ç–ø—Ä–∞–≤–ª–µ–Ω —Å—Ç—Ä–∏–º
                      callback_query_id: "{{button_id}}"

              - conditions:
                  - condition: template
                    value_template: "{{command_tg=='reload'}}"
                sequence:
                  - if:
                      - condition: template
                        value_template: "{{this.attributes.current|int(0) < 1}}"
                    then:
                      - service: telegram_bot.edit_replymarkup
                        data:
                          message_id: "{{message_id}}"
                          chat_id: "{{chat_id}}"
                          inline_keyboard: "{{inline_keyboard_jpg}}"
                      - service: telegram_bot.answer_callback_query
                        data:
                          show_alert: true
                          message: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞
                          callback_query_id: "{{button_id}}"
                    else:
                      - stop: –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –≤ answer_callback, –æ—à–∏–±–æ—á–Ω–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ ‚è≥ reload

              - conditions:
                  - condition: template
                    value_template: "{{command_tg=='thumb' and this.attributes.current|int(0) < 1}}"
                sequence:
                  - service: python_script.exec
                    data:
                      cache: true
                      new_file: "{{frigate_api}}/{{video_id}}/{{in_type_photo}}.jpg"
                      message_id: "{{message_id}}"
                      new_message: "{{mes_caption.replace('üé•','üì∏')}}"
                      chat_id: "{{chat_id}}"
                      button_id: "{{button_id}}"
                      keyboard: "{{inline_keyboard_jpg}}"
                      file: /config/python_scripts/edit_media_telegram.py

              - conditions:
                  - condition: template
                    value_template: "{{command_tg=='clip'}}"
                sequence:
                  - service: telegram_bot.edit_replymarkup
                    data:
                      message_id: "{{message_id}}"
                      chat_id: "{{chat_id}}"
                      inline_keyboard: "{{inline_keyboard_reload}}"
                  - parallel:
                      - service: python_script.exec
                        data:
                          cache: true
                          new_file: "{{frigate_api}}/{{video_id}}/clip.mp4"
                          message_id: "{{message_id}}"
                          new_message: "{{mes_caption.replace('üì∏','üé•')}}"
                          chat_id: "{{chat_id}}"
                          button_id: "{{button_id}}"
                          keyboard: "{{inline_keyboard_clip}}"
                          file: /config/python_scripts/edit_media_telegram.py
                      - sequence:
                          - wait_for_trigger:
                              - platform: event
                                event_type: telegram_callback
                                event_data:
                                  data: "/frigate_{{camera}} {{video_id}} thumb"
                              - platform: event
                                event_type: edit_media_telegram
                                event_data:
                                  script_status: "error"
                            timeout: !input in_time_wait
                          - if:
                              - condition: template
                                value_template: "{{wait.trigger.event.event_type == 'edit_media_telegram'}}"
                            then:
                              - service: telegram_bot.edit_caption
                                data:
                                  message_id: "{{message_id}}"
                                  chat_id: "{{chat_id}}"
                                  caption: "{{mes_caption}}"
                                  inline_keyboard: "{{inline_keyboard_jpg}}"
                              - stop: –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –º–µ–¥–∏–∞
                          - variables:
                              button_id: |-
                                {%-if not wait.trigger-%}
                                  False
                                {%-else-%}
                                  {{-wait.trigger.event.data.id-}}
                                {%-endif-%}
                          - service: python_script.exec
                            data:
                              cache: true
                              new_file: "{{frigate_api}}/{{video_id}}/{{in_type_photo}}.jpg"
                              message_id: "{{message_id}}"
                              new_message: "{{mes_caption.replace('üé•','üì∏')}}"
                              chat_id: "{{chat_id}}"
                              button_id: "{{button_id}}"
                              keyboard: "{{inline_keyboard_jpg}}"
                              file: /config/python_scripts/edit_media_telegram.py
            default:
              - delay:
                  hours: 0
                  minutes: 0
                  seconds: 3
                  milliseconds: 0
              - service: telegram_bot.answer_callback_query
                data:
                  show_alert: true
                  message: ü§î–ï—Å–ª–∏ —É–≤–∏–¥–∏—Ç–µ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ –∫–æ–º–∞–Ω–¥–µ {{command_tg}}, —Ç–æ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ. –°–µ–π—á–∞—Å –∑–∞–ø—É—â–µ–Ω–æ {{this.attributes.current|int(0)}} –∞–≤—Ç–æ.
                  callback_query_id: "{{button_id}}"
